<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>VR Newton's Rings Setup</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.1/dist/aframe-environment-component.min.js"></script>
  </head>
  <body>
    <a-scene shadow="type: pcfsoft">
      
      <!-- ASSETS -->
      <a-assets>
        <a-mixin id="glass-mat" material="color: #E0F7FA; opacity: 0.4; roughness: 0.1; metalness: 0.9; side: double"></a-mixin>
        <a-mixin id="metal-mat" material="color: #333; roughness: 0.4; metalness: 0.8"></a-mixin>
        <a-mixin id="lens-mat" material="color: #FFFFFF; opacity: 0.5; roughness: 0.0; metalness: 0.1"></a-mixin>
      </a-assets>

      <!-- ENVIRONMENT -->
      <a-entity environment="preset: starry; groundColor: #111; grid: none"></a-entity>

      <!-- LAB TABLE -->
      <a-box position="0 0.8 -1.5" width="4" depth="3" height="0.1" color="#5D4037" shadow="receive: true"></a-box>

      <!-- === THE APPARATUS === -->
      <a-entity position="0 0.85 -1.5">
        
        <!-- Base Glass Plate (Plane Glass) -->
        <a-box position="0 0.02 0" width="1" depth="1" height="0.04" mixin="glass-mat" shadow="cast: false"></a-box>
        
        <!-- Plano-Convex Lens (Represented by a flattened sphere top) -->
        <a-sphere position="0 0.08 0" radius="0.45" scale="1 0.1 1" mixin="lens-mat" shadow="cast: false"></a-sphere>

        <!-- THE RINGS (Simulated Interference Pattern) -->
        <!-- These are placed between the lens and plate to simulate the visual phenomenon -->
        <a-entity position="0 0.04 0" rotation="90 0 0">
           <a-torus radius="0.05" radius-tubular="0.002" color="#FFD700" opacity="0.8"></a-torus>
           <a-torus radius="0.10" radius-tubular="0.002" color="#FFD700" opacity="0.7"></a-torus>
           <a-torus radius="0.15" radius-tubular="0.002" color="#FFD700" opacity="0.6"></a-torus>
           <a-torus radius="0.20" radius-tubular="0.002" color="#FFD700" opacity="0.5"></a-torus>
           <a-torus radius="0.25" radius-tubular="0.002" color="#FFD700" opacity="0.4"></a-torus>
           <a-torus radius="0.30" radius-tubular="0.002" color="#FFD700" opacity="0.3"></a-torus>
        </a-entity>

        <!-- 45 Degree Glass Plate (Beam Splitter) -->
        <!-- Reflects light from source down to lens -->
        <a-box position="0 0.6 0" rotation="45 0 0" width="0.8" height="0.8" depth="0.02" mixin="glass-mat"></a-box>

        <!-- === MICROSCOPE === -->
        <a-entity position="0 1.2 0">
          <!-- Objective Lens Housing -->
          <a-cylinder position="0 -0.2 0" radius="0.1" height="0.4" mixin="metal-mat"></a-cylinder>
          <!-- Main Tube -->
          <a-cylinder position="0 0.3 0" radius="0.08" height="1.0" mixin="metal-mat"></a-cylinder>
          <!-- Eyepiece -->
          <a-cylinder position="0 0.85 0" radius="0.09" height="0.1" color="black"></a-cylinder>
          
          <!-- Microscope Stand/Arm (simplified) -->
          <a-box position="0.3 0 0" height="1.5" width="0.1" depth="0.1" mixin="metal-mat"></a-box>
          <a-box position="0.15 -0.2 0" width="0.3" height="0.1" depth="0.1" mixin="metal-mat"></a-box>
        </a-entity>

      </a-entity>

      <!-- === LIGHT SOURCE === -->
      <!-- Sodium Lamp (Side) -->
      <a-entity position="1.5 1.45 -1.5" rotation="0 0 90">
        <!-- The Bulb Housing -->
        <a-cylinder height="0.6" radius="0.15" color="#333" open-ended="true"></a-cylinder>
        
        <!-- The 'Sodium' Light Bulb -->
        <a-sphere position="0 0 0" radius="0.1" color="#FFAA00" emissive="#FFAA00" emissive-intensity="2"></a-sphere>
        
        <!-- Actual Light Logic -->
        <a-light type="point" color="#FFAA00" intensity="1.5" distance="5" decay="2"></a-light>
        <a-light type="spot" color="#FFAA00" intensity="2" angle="45" target="#lens-center" penumbra="0.5"></a-light>
      </a-entity>

      <!-- Collimating Lens (Between light and Setup) -->
      <a-cylinder position="0.8 1.45 -1.5" rotation="0 0 90" radius="0.2" height="0.05" mixin="glass-mat"></a-cylinder>

      <!-- Target helper for spotlight -->
      <a-entity id="lens-center" position="0 0.85 -1.5"></a-entity>

      <!-- LABELS -->
      <a-text value="Traveling Microscope" position="-0.8 2.5 -1.5" color="white" align="center" width="4"></a-text>
      <a-text value="Sodium Light Source" position="2 2 -1.5" color="#FFAA00" align="center" width="4"></a-text>
      <a-text value="45 deg Glass Plate" position="-0.8 1.5 -1.5" color="#E0F7FA" align="center" width="3"></a-text>
      <a-text value="Newton's Rings" position="0 0.9 -1.0" rotation="-45 0 0" color="#FFD700" align="center" width="2"></a-text>

      <!-- CAMERA & CONTROLS -->
      <a-entity id="rig" position="0 1.6 1.5">
        <a-camera look-controls wasd-controls>
          <a-cursor color="yellow"></a-cursor>
        </a-camera>
      </a-entity>

    </a-scene>
  </body>
</html>
